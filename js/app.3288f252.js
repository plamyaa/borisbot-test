(function(){"use strict";var e={7933:function(e,t,n){var o=n(9242),r=n(3396);function i(e,t,n,o,i,s){const d=(0,r.up)("Field"),a=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d),(0,r.Wm)(a)],64)}const s={class:"field"},d={class:"box",width:"100vw",height:"100vh"};function a(e,t,n,o,i,a){const c=(0,r.up)("Figure"),u=(0,r.up)("Line");return(0,r.wg)(),(0,r.iD)("main",s,[((0,r.wg)(),(0,r.iD)("svg",d,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.figures,(e=>((0,r.wg)(),(0,r.j4)(c,{key:e.id,id:e.id},null,8,["id"])))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.lines,(e=>((0,r.wg)(),(0,r.j4)(u,{key:e.id,id:e.id,lineName:e.lineName},null,8,["id","lineName"])))),128))]))])}var c=n(65),u=n(7139);const l={ref:"box",class:"box",width:"100vw",height:"100vh"},g=["width","height","x","y"];function h(e,t,n,i,s,d){const a=(0,r.up)("FigureDeleteButton"),c=(0,r.up)("FigureConnector");return(0,r.wg)(),(0,r.iD)("svg",l,[(0,r._)("rect",{width:e.figure.width,height:e.figure.height,style:(0,u.j5)([e.cursor,{fill:"#0069d1",stroke:"#fff","stroke-width":"2"}]),x:e.figure.coords.x,y:e.figure.coords.y,onMousedown:t[0]||(t[0]=(...t)=>e.drag&&e.drag(...t)),onMouseup:t[1]||(t[1]=(...t)=>e.drop&&e.drop(...t))},null,44,g),(0,r.Wm)(a,{x:e.figure.coords.x+e.figure.width,y:e.figure.coords.y,id:e.id},null,8,["x","y","id"]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getDefaultConnectors,(n=>((0,r.wg)(),(0,r.j4)(c,{key:n.id,id:e.id,name:n.name,onMousedown:t[2]||(t[2]=(0,o.iM)((()=>{}),["stop"]))},null,8,["id","name"])))),128))],512)}const f=["cx","cy","fill"];function m(e,t,n,o,i,s){return(0,r.wg)(),(0,r.iD)("circle",{class:"connector",cx:e.coords.x,cy:e.coords.y,fill:e.isActive,r:"15",style:(0,u.j5)(e.style),onClick:t[0]||(t[0]=(...t)=>e.toggleConnector&&e.toggleConnector(...t))},null,12,f)}var v=(0,r.aZ)({name:"FigureConnector",props:{id:Number,name:String},data(){return{style:"cursor: pointer; stroke: #fff; stroke-width=2"}},methods:{...(0,c.OI)({activateConnector:"activateConnector",deactivateConnector:"deactivateConnector",linesConnectors:"getLinesConnectors"}),toggleConnector(){const e=this.name;e&&this.activateConnector(this.id+e)}},computed:{...(0,c.Se)({activeConnector:"getActiveConnector",connectorCoords:"getConnectorCoords"}),isActive(){const e=this.name;return e&&this.activeConnector===this.id+e?"#ebebeb":"#cfcfcf"},coords(){return this.connectorCoords(this.id,this.name)}}}),p=n(89);const C=(0,p.Z)(v,[["render",m]]);var w=C;const y=["x1","y1","x2","y2"],x=["x1","y1","x2","y2"];function b(e,t,n,o,i,s){return(0,r.wg)(),(0,r.iD)("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",onClick:t[0]||(t[0]=(...t)=>e.deleteObject&&e.deleteObject(...t)),cursor:"pointer"},[(0,r._)("line",{x1:e.newX(2),y1:e.newY(-2),x2:e.newX(-6),y2:e.newY(6),stroke:"red","stroke-width":"2"},null,8,y),(0,r._)("line",{x1:e.newX(-6),y1:e.newY(-2),x2:e.newX(2),y2:e.newY(6),stroke:"red","stroke-width":"2"},null,8,x)])}var F=(0,r.aZ)({name:"FigureDeleteButton",props:{x:Number,y:Number,id:Number},methods:{...(0,c.OI)(["deleteFigure","deleteConnectorsGroup","deleteLines"]),deleteObject(){const e=this.id;this.deleteFigure(e),this.deleteConnectorsGroup(e),this.deleteLines(e)},newX(e){const t=this.x;return t?t+e:t},newY(e){const t=this.y;return t?t+e:t}}});const O=(0,p.Z)(F,[["render",b]]);var k=O,L=(0,r.aZ)({name:"FieldFigure",components:{FigureConnector:w,FigureDeleteButton:k},props:{id:Number},data(){return{dragOffsetX:0,dragOffsetY:0}},computed:{...(0,c.Se)(["getDefaultConnectors","getConnectors"]),figure(){return this.$store.getters.getFigureParams(this.id)},cursor(){return"cursor: "+(this.dragOffsetX?"grabbing":"grab")}},methods:{...(0,c.OI)({setZ:"setFigureZIndex"}),...(0,c.OI)(["moveFigure","deactivateConnector","moveConnectorsGroup"]),drag({offsetX:e,offsetY:t}){this.dragOffsetX=e-this.figure.coords.x,this.dragOffsetY=t-this.figure.coords.y,this.$refs.box.addEventListener("mousemove",this.move)},drop(){this.dragOffsetX=this.dragOffsetY=0,this.$refs.box.removeEventListener("mousemove",this.move)},move({offsetX:e,offsetY:t}){const n=e-this.dragOffsetX,o=t-this.dragOffsetY;this.moveFigure({id:this.id,x:n,y:o}),this.moveConnectorsGroup({id:this.id,width:this.figure.width,height:this.figure.height,figurePosition:{x:n,y:o}})}},mounted(){window.addEventListener("mouseup",this.drop),window.addEventListener("mousedown",this.deactivateConnector)},beforeUnmount(){window.removeEventListener("mouseup",this.drop),window.removeEventListener("mousedown",this.deactivateConnector)}});const I=(0,p.Z)(L,[["render",h],["__scopeId","data-v-61122946"]]);var _=I;const N=["id","x1","y1","x2","y2"],j=["cx","cy"],D=["cx","cy"];function Z(e,t,n,o,i,s){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("line",{id:e.lineName,x1:e.getFirstConnector.x,y1:e.getFirstConnector.y,x2:e.getSecondConnector.x,y2:e.getSecondConnector?.y,style:(0,u.j5)(e.style)},null,12,N),(0,r._)("circle",{class:"connector",cx:e.getFirstConnector.x,cy:e.getFirstConnector.y,fill:"red",r:"5",style:(0,u.j5)(e.style),onClick:t[0]||(t[0]=t=>e.deleteLine(e.id))},null,12,j),(0,r._)("circle",{class:"connector",cx:e.getSecondConnector.x,cy:e.getSecondConnector.y,fill:"red",r:"5",style:(0,u.j5)(e.style),onClick:t[1]||(t[1]=t=>e.deleteLine(e.id))},null,12,D)],64)}var Y=(0,r.aZ)({name:"FieldLine",props:{id:Number,lineName:String},data(){return{style:"stroke: #000; stroke-width: 2;",connectors:this.lineName?.split("-")}},methods:{...(0,c.OI)(["deleteLine"])},computed:{...(0,c.Se)(["getConnectorCoords"]),getConnector(e){return this.getConnectorCoords(Number(e[0]),e.slice(1))},getFirstConnector(){const e=this.connectors;if(e){const t=e[0],n=parseInt(t).toString().length;return this.getConnectorCoords(Number(t.slice(0,n)),t.slice(n))}return 0},getSecondConnector(){const e=this.connectors;if(e){const t=e[1],n=parseInt(t).toString().length;return this.getConnectorCoords(Number(t.slice(0,n)),t.slice(n))}return 0}}});const S=(0,p.Z)(Y,[["render",Z]]);var X=S,A=(0,r.aZ)({components:{Figure:_,Line:X},name:"AppField",computed:{...(0,c.Se)({figures:"getFigures",lines:"getLines"})}});const G=(0,p.Z)(A,[["render",a],["__scopeId","data-v-a94457e6"]]);var M=G;const P={class:"footer"};function E(e,t,n,o,i,s){return(0,r.wg)(),(0,r.iD)("footer",P,[(0,r._)("button",{class:"footer__add-button",onClick:t[0]||(t[0]=(...t)=>e.handleAdd&&e.handleAdd(...t))},"add")])}var H=(0,r.aZ)({name:"AppFooter",methods:{...(0,c.OI)({addFigure:"addFigure",addConnectors:"addConnectorsGroup"}),handleAdd(){this.addFigure();const{width:e,height:t,coords:n}=this.lastFigure;this.addConnectors({width:e,height:t,figurePosition:n})}},computed:{...(0,c.Se)({lastFigure:"getLastFigure"})}});const W=(0,p.Z)(H,[["render",E],["__scopeId","data-v-5b4b9d1a"]]);var z=W,B=(0,r.aZ)({name:"App",components:{Field:M,Footer:z}});const K=(0,p.Z)(B,[["render",i]]);var T=K,$=(n(7658),{state(){return{data:[],activeConnector:""}},getters:{getLines(e){return e.data},getActiveConnector(e){return e.activeConnector},getLinesConnectors(e){const t=e.data.map((e=>e.lineName.split("-")));return t}},mutations:{activateConnector(e,t){const n=e.activeConnector,o=parseInt(t).toString().length-1;if(""===e.activeConnector)e.activeConnector=t;else if(e.activeConnector[o]===t[o])e.activeConnector=t;else if(e.activeConnector!==t){e.activeConnector="";const o=void 0===e.data[e.data.length-1]?.id?1:e.data[e.data.length-1].id+1;e.data.push({id:o,lineName:n+"-"+t})}},deactivateConnector(e){e.activeConnector=""},deleteLine(e,t){e.data=e.data.filter((e=>e.id!==t))},deleteLines(e,t){e.data=e.data.filter((e=>{const n=e.lineName.split("-"),o=parseInt(n[0]),r=parseInt(n[1]);return o===t||r===t?null:e}))}}}),R={state(){return{data:[]}},getters:{getFigures(e){return e.data},getFigureParams:e=>t=>e.data.find((e=>e.id===t)),getLastFigure(e){return e.data[e.data.length-1]}},mutations:{addFigure(e){const t=void 0===e.data[e.data.length-1]?.id?1:e.data[e.data.length-1].id+1;return e.data.push({id:t,width:100,height:100,zIndex:0,borderRadius:0,coords:{x:550*Math.random()+50,y:550*Math.random()+50}})},deleteFigure(e,t){e.data=e.data.filter((e=>e.id!==t))},setFigureWidth(e,t){const{id:n,width:o}=t;e.data=e.data.map((e=>(e.id===n&&(e.width=o),e)))},setFigureHeight(e,t){const{id:n,height:o}=t;e.data=e.data.map((e=>(e.id===n&&(e.height=o),e)))},setFigureZIndex(e,t){const{id:n,zIndex:o}=t;e.data=e.data.map((e=>(e.id===n&&(e.zIndex=o),e)))},moveFigure(e,t){const{id:n,x:o,y:r}=t;e.data=e.data.map((e=>(e.id===n&&(e.coords={x:o,y:r}),e)))}}},U={state(){return{defaultConnectors:[{id:1,name:"top"},{id:2,name:"right"},{id:3,name:"bottom"},{id:4,name:"left"}],data:[]}},getters:{getDefaultConnectors(e){return e.defaultConnectors},getConnectors(e){return e.data},getConnectorsGroup:e=>t=>e.data.find((e=>e.id===t)),getConnectorCoords:e=>(t,n)=>{const o=e.data.find((e=>e.id===t));if(o)return o[n]}},mutations:{addConnectorsGroup(e,t){const{width:n,height:o,figurePosition:{x:r,y:i}}=t,s=void 0===e.data[e.data.length-1]?.id?1:e.data[e.data.length-1].id+1;e.data.push({id:s,top:{x:r+n/2,y:i},right:{x:r+n,y:i+o/2},bottom:{x:r+n/2,y:i+o},left:{x:r,y:i+o/2}})},deleteConnectorsGroup(e,t){e.data=e.data.filter((e=>e.id!==t))},moveConnectorsGroup(e,t){const{id:n,width:o,height:r,figurePosition:{x:i,y:s}}=t;e.data=e.data.map((e=>(e.id===n&&(e.top={x:i+o/2,y:s},e.right={x:i+o,y:s+r/2},e.bottom={x:i+o/2,y:s+r},e.left={x:i,y:s+r/2}),e)))}}},q=(0,c.MT)({modules:{figures:R,connectors:U,lines:$}});(0,o.ri)(T).use(q).mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,i){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],i=e[u][2];for(var d=!0,a=0;a<o.length;a++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[a])}))?o.splice(a--,1):(d=!1,i<s&&(s=i));if(d){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,s=o[0],d=o[1],a=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in d)n.o(d,r)&&(n.m[r]=d[r]);if(a)var u=a(n)}for(t&&t(o);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunkborisbot_test"]=self["webpackChunkborisbot_test"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(7933)}));o=n.O(o)})();
//# sourceMappingURL=app.3288f252.js.map