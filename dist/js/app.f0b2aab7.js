(function(){"use strict";var t={7633:function(t,e,n){var o=n(9242),r=n(3396);function i(t,e,n,o,i,s){const d=(0,r.up)("Field"),a=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d),(0,r.Wm)(a)],64)}const s={class:"field"},d={class:"box",width:"100vw",height:"100vh"};function a(t,e,n,o,i,a){const c=(0,r.up)("Figure"),u=(0,r.up)("Line");return(0,r.wg)(),(0,r.iD)("main",s,[((0,r.wg)(),(0,r.iD)("svg",d,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.figures,(t=>((0,r.wg)(),(0,r.j4)(c,{key:t.id,id:t.id},null,8,["id"])))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.lines,(t=>((0,r.wg)(),(0,r.j4)(u,{key:t.id,id:t.id,lineName:t.lineName},null,8,["id","lineName"])))),128))]))])}var c=n(65),u=n(7139);const g={ref:"box",class:"box",width:"100vw",height:"100vh"},l=["width","height","x","y"];function f(t,e,n,i,s,d){const a=(0,r.up)("FigureConnector");return(0,r.wg)(),(0,r.iD)("svg",g,[(0,r._)("rect",{width:t.figure.width,height:t.figure.height,style:(0,u.j5)([t.cursor,{fill:"#0069d1",stroke:"#fff","stroke-width":"2"}]),x:t.figure.coords.x,y:t.figure.coords.y,onMousedown:e[0]||(e[0]=(...e)=>t.drag&&t.drag(...e)),onMouseup:e[1]||(e[1]=(...e)=>t.drop&&t.drop(...e))},null,44,l),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.getDefaultConnectors,(n=>((0,r.wg)(),(0,r.j4)(a,{key:n.id,id:t.id,name:n.name,onMousedown:e[2]||(e[2]=(0,o.iM)((()=>{}),["stop"]))},null,8,["id","name"])))),128))],512)}const h=["cx","cy","fill"];function m(t,e,n,o,i,s){return(0,r.wg)(),(0,r.iD)("circle",{class:"connector",cx:t.coords.x,cy:t.coords.y,fill:t.isActive,r:"15",style:(0,u.j5)(t.style),onClick:e[0]||(e[0]=(...e)=>t.toggleConnector&&t.toggleConnector(...e))},null,12,h)}var v=(0,r.aZ)({name:"FigureConnector",props:{id:Number,name:String},data(){return{style:"cursor: pointer; stroke: #fff; stroke-width=2"}},methods:{...(0,c.OI)({activateConnector:"activateConnector",deactivateConnector:"deactivateConnector",linesConnectors:"getLinesConnectors"}),toggleConnector(){const t=this.name;t&&this.activateConnector(this.id+t)}},computed:{...(0,c.Se)({activeConnector:"getActiveConnector",connectorCoords:"getConnectorCoords"}),isActive(){const t=this.name;return t&&this.activeConnector===this.id+t?"#ebebeb":"#cfcfcf"},coords(){return this.connectorCoords(this.id,this.name)}}}),p=n(89);const C=(0,p.Z)(v,[["render",m]]);var y=C,w=(0,r.aZ)({name:"FieldFigure",components:{FigureConnector:y},props:{id:Number},data(){return{dragOffsetX:0,dragOffsetY:0}},computed:{...(0,c.Se)(["getDefaultConnectors","getConnectors"]),figure(){return this.$store.getters.getFigureParams(this.id)},cursor(){return"cursor: "+(this.dragOffsetX?"grabbing":"grab")}},methods:{...(0,c.OI)({setZ:"setFigureZIndex"}),...(0,c.OI)(["moveFigure","deactivateConnector","moveConnectorsGroup"]),drag({offsetX:t,offsetY:e}){this.dragOffsetX=t-this.figure.coords.x,this.dragOffsetY=e-this.figure.coords.y,this.$refs.box.addEventListener("mousemove",this.move)},drop(){this.dragOffsetX=this.dragOffsetY=0,this.$refs.box.removeEventListener("mousemove",this.move)},move({offsetX:t,offsetY:e}){const n=t-this.dragOffsetX,o=e-this.dragOffsetY;this.moveFigure({id:this.id,x:n,y:o}),this.moveConnectorsGroup({id:this.id,width:this.figure.width,height:this.figure.height,figurePosition:{x:n,y:o}})}},mounted(){window.addEventListener("mouseup",this.drop),window.addEventListener("mousedown",this.deactivateConnector)},beforeUnmount(){window.removeEventListener("mouseup",this.drop),window.removeEventListener("mousedown",this.deactivateConnector)}});const x=(0,p.Z)(w,[["render",f],["__scopeId","data-v-443a0f96"]]);var b=x;const F=["id","x1","y1","x2","y2"],O=["cx","cy"],L=["cx","cy"];function k(t,e,n,o,i,s){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("line",{id:t.lineName,x1:t.getFirstConnector.x,y1:t.getFirstConnector.y,x2:t.getSecondConnector.x,y2:t.getSecondConnector?.y,style:(0,u.j5)(t.style)},null,12,F),(0,r._)("circle",{class:"connector",cx:t.getFirstConnector.x,cy:t.getFirstConnector.y,fill:"red",r:"5",style:(0,u.j5)(t.style),onClick:e[0]||(e[0]=e=>t.deleteLine(t.id))},null,12,O),(0,r._)("circle",{class:"connector",cx:t.getSecondConnector.x,cy:t.getSecondConnector.y,fill:"red",r:"5",style:(0,u.j5)(t.style),onClick:e[1]||(e[1]=e=>t.deleteLine(t.id))},null,12,L)],64)}var _=(0,r.aZ)({name:"FieldLine",props:{id:Number,lineName:String},data(){return{style:"stroke: #000; stroke-width: 2;",connectors:this.lineName?.split("-")}},methods:{...(0,c.OI)(["deleteLine"])},computed:{...(0,c.Se)(["getConnectorCoords"]),getConnector(t){return this.getConnectorCoords(Number(t[0]),t.slice(1))},getFirstConnector(){const t=this.connectors;if(t){const e=t[0],n=parseInt(e).toString().length;return this.getConnectorCoords(Number(e.slice(0,n)),e.slice(n))}return 0},getSecondConnector(){const t=this.connectors;if(t){const e=t[1],n=parseInt(e).toString().length;return this.getConnectorCoords(Number(e.slice(0,n)),e.slice(n))}return 0}}});const I=(0,p.Z)(_,[["render",k]]);var S=I,Z=(0,r.aZ)({components:{Figure:b,Line:S},name:"AppField",computed:{...(0,c.Se)({figures:"getFigures",lines:"getLines"})}});const j=(0,p.Z)(Z,[["render",a],["__scopeId","data-v-a94457e6"]]);var N=j;const D={class:"footer"};function Y(t,e,n,o,i,s){return(0,r.wg)(),(0,r.iD)("footer",D,[(0,r._)("button",{class:"footer__add-button",onClick:e[0]||(e[0]=(...e)=>t.handleAdd&&t.handleAdd(...e))},"add")])}var A=(0,r.aZ)({name:"AppFooter",methods:{...(0,c.OI)({addFigure:"addFigure",addConnectors:"addConnectorsGroup"}),handleAdd(){this.addFigure();const{width:t,height:e,coords:n}=this.lastFigure;this.addConnectors({width:t,height:e,figurePosition:n})}},computed:{...(0,c.Se)({lastFigure:"getLastFigure"})}});const M=(0,p.Z)(A,[["render",Y],["__scopeId","data-v-5b4b9d1a"]]);var P=M,E=(0,r.aZ)({name:"App",components:{Field:N,Footer:P}});const G=(0,p.Z)(E,[["render",i]]);var X=G,H=(n(7658),{state(){return{data:[],activeConnector:""}},getters:{getLines(t){return t.data},getActiveConnector(t){return t.activeConnector},getLinesConnectors(t){const e=t.data.map((t=>t.lineName.split("-")));return e}},mutations:{activateConnector(t,e){const n=t.activeConnector,o=parseInt(e).toString().length-1;if(""===t.activeConnector)t.activeConnector=e;else if(t.activeConnector[o]===e[o])t.activeConnector=e;else if(t.activeConnector!==e){t.activeConnector="";const o=void 0===t.data[t.data.length-1]?.id?1:t.data[t.data.length-1].id+1;t.data.push({id:o,lineName:n+"-"+e})}},deactivateConnector(t){t.activeConnector=""},deleteLine(t,e){t.data=t.data.filter((t=>t.id!==e))}}}),z={state(){return{data:[]}},getters:{getFigures(t){return t.data},getFigureParams:t=>e=>t.data.find((t=>t.id===e)),getLastFigure(t){return t.data[t.data.length-1]}},mutations:{addFigure(t){const e=void 0===t.data[t.data.length-1]?.id?1:t.data[t.data.length-1].id+1;return t.data.push({id:e,width:100,height:100,zIndex:0,borderRadius:0,coords:{x:550*Math.random()+50,y:550*Math.random()+50}})},deleteFigure(t,e){t.data=t.data.filter((t=>t.id!==e))},setFigureWidth(t,e){const{id:n,width:o}=e;t.data=t.data.map((t=>(t.id===n&&(t.width=o),t)))},setFigureHeight(t,e){const{id:n,height:o}=e;t.data=t.data.map((t=>(t.id===n&&(t.height=o),t)))},setFigureZIndex(t,e){const{id:n,zIndex:o}=e;t.data=t.data.map((t=>(t.id===n&&(t.zIndex=o),t)))},moveFigure(t,e){const{id:n,x:o,y:r}=e;t.data=t.data.map((t=>(t.id===n&&(t.coords={x:o,y:r}),t)))}}},K={state(){return{defaultConnectors:[{id:1,name:"top"},{id:2,name:"right"},{id:3,name:"bottom"},{id:4,name:"left"}],data:[]}},getters:{getDefaultConnectors(t){return t.defaultConnectors},getConnectors(t){return t.data},getConnectorsGroup:t=>e=>t.data.find((t=>t.id===e)),getConnectorCoords:t=>(e,n)=>{const o=t.data.find((t=>t.id===e));if(o)return o[n]}},mutations:{addConnectorsGroup(t,e){const{width:n,height:o,figurePosition:{x:r,y:i}}=e,s=void 0===t.data[t.data.length-1]?.id?1:t.data[t.data.length-1].id+1;t.data.push({id:s,top:{x:r+n/2,y:i},right:{x:r+n,y:i+o/2},bottom:{x:r+n/2,y:i+o},left:{x:r,y:i+o/2}})},deleteConnectorsGroup(t,e){t.data=t.data.filter((t=>t.id!==e))},moveConnectorsGroup(t,e){const{id:n,width:o,height:r,figurePosition:{x:i,y:s}}=e;t.data=t.data.map((t=>(t.id===n&&(t.top={x:i+o/2,y:s},t.right={x:i+o,y:s+r/2},t.bottom={x:i+o/2,y:s+r},t.left={x:i,y:s+r/2}),t)))}}},T=(0,c.MT)({modules:{figures:z,connectors:K,lines:H}});(0,o.ri)(X).use(T).mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,i){if(!o){var s=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],i=t[u][2];for(var d=!0,a=0;a<o.length;a++)(!1&i||s>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(d=!1,i<s&&(s=i));if(d){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[o,r,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,i,s=o[0],d=o[1],a=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(r in d)n.o(d,r)&&(n.m[r]=d[r]);if(a)var u=a(n)}for(e&&e(o);c<s.length;c++)i=s[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},o=self["webpackChunkborisbot_test"]=self["webpackChunkborisbot_test"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(7633)}));o=n.O(o)})();
//# sourceMappingURL=app.f0b2aab7.js.map